(this["webpackJsonphardware-register-app"]=this["webpackJsonphardware-register-app"]||[]).push([[0],{37:function(e,t,a){e.exports=a.p+"static/media/loading.b9b335db.gif"},59:function(e,t,a){e.exports=a.p+"static/media/hardware-register.7bb60a09.PNG"},63:function(e,t,a){e.exports=a.p+"static/media/searching.90982f5e.png"},74:function(e,t,a){e.exports=a(87)},79:function(e,t,a){},87:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),s=a(17),o=a.n(s),c=(a(79),a(5)),l=a(11),i=a(12),u=a(14),d=a(13),m=a(18),p=a(7),h=a.n(p),b=a(15),E=a.n(b),f=function(){return"SET_AUTH"},v=function(e){return function(t){t({type:f,cred:e})}},w=a(100),g=a(98),y=a(92),j=a(62),O="https://satshree.pythonanywhere.com",S=a(59),N=a.n(S),P=a(37),x=a.n(P),k={padding:"30px",borderRadius:"10px",boxShadow:"0px 0px 10px 0px #000",width:"30rem"},C={height:"250px",width:"400px"},T={display:"flex",justifyContent:"center"},D=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateProductionNumber=function(e){n.setState(Object(c.a)(Object(c.a)({},n.state),{},{prodNumber:e.target.value}))},n.registerHardware=function(e){e.preventDefault();var t=n.state,a=t.prodNumber,r=t.accessToken;if(a){var s=JSON.stringify({production_number:a});E.a.ajax({method:"POST",url:O+"/api/hardware/",headers:{Authorization:r,"Content-Type":"application/json"},xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(){h()({icon:x.a})}),!1),e},data:s,dataType:"json",success:function(e){h()({title:"Hardware successfully added.",icon:"success"}).then((function(){return n.setState(Object(c.a)(Object(c.a)({},n.state),{},{prodNumber:""}))}))},error:function(e){console.log(e),h()({title:"Something went wrong.",text:"Please try again",icon:"warning"})}})}else h()({title:"Please Enter Production Number.",icon:"warning"})},n.verfiyDevice=function(e){e.preventDefault();var t=n.state,a=t.prodNumber,r=t.accessToken;if(a){var s=JSON.stringify({production_number:a});E.a.ajax({method:"POST",url:O+"/api/hardware/verify/device/",headers:{Authorization:r,"Content-Type":"application/json"},xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(){h()({icon:x.a})}),!1),e},data:s,dataType:"json",success:function(e){!0===e.status&&h()({title:"Device exists .",icon:"success"}).then((function(){return n.setState(Object(c.a)(Object(c.a)({},n.state),{},{prodNumber:""}))}))},error:function(e){console.log(e),404===e.status?h()({title:"Device doesnot exist.",icon:"warning"}).then((function(){return n.setState(Object(c.a)(Object(c.a)({},n.state),{},{prodNumber:""}))})):h()({title:"Something went wrong.",text:"Please try again",icon:"warning"})}})}else h()({title:"Please Enter Production Number.",icon:"warning"})},n.state={accessToken:n.props.accessToken,prodNumber:""},n}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{style:k},r.a.createElement("h3",{style:{textAlign:"center"}},"Register Hardware"),r.a.createElement("br",null),r.a.createElement(w.a.Img,{src:N.a,style:C}),r.a.createElement("br",null),r.a.createElement(g.a,{onSubmit:this.registerHardware},r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"Production Number")),r.a.createElement(g.a.Control,{placeholder:"Enter Production Number",type:"number",onChange:this.updateProductionNumber,value:this.state.prodNumber,required:!0})),r.a.createElement("div",{className:"container",style:T},r.a.createElement(j.a,{variant:"success",type:"submit"},"Register Now"),r.a.createElement(j.a,{variant:"success",style:{marginLeft:"10px"},type:"submit",onClick:this.verfiyDevice},"Verify Device")))))}}]),a}(n.Component),I=Object(m.b)((function(e){return{accessToken:e.credentials.tokens.accessToken}}),{})(D),M=a(30),_=a(93),L=a(94),A=a(96),F=a(61),U=a(97),H=a(63),R=a.n(H),B={padding:"30px",borderRadius:"10px",boxShadow:"0px 0px 10px 0px #000",width:"30rem"},q={display:"flex",justifyContent:"center"},J=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateProductNumber=function(e){n.setState(Object(c.a)(Object(c.a)({},n.state),{},{productionNumber:e.target.value}))},n.updateRegisteredDate=function(e){n.setState(Object(c.a)(Object(c.a)({},n.state),{},{registeredDate:e.target.value}))},n.getHardware=function(e){e.preventDefault();var t=n.state,a=t.accessToken,r={search:t.productionNumber,registered:t.registeredDate},s=Object(M.a)(n);E.a.ajax({method:"GET",url:O+"/api/hardware/",headers:{Authorization:a,"Content-Type":"application/json"},data:r,dataType:"json",success:function(e){s.setState(Object(c.a)(Object(c.a)({},s.state),{},{searchDeviceList:e.results}))},error:function(e){console.log(e),404===e.status?h()({title:"Device Not Found.",icon:"warning"}):h()({title:"Something went wrong.",text:"Please try again.",icon:"warning"})}})},n.newProductionNumber=function(e){var t=n.state.searchDeviceList;t.production_number=e.target.value,n.setState(Object(c.a)(Object(c.a)({},n.state),{},{searchDeviceList:t}))},n.updateHardwareInfo=function(e){e.preventDefault();var t=n.state,a=t.searchDeviceList,r=t.accessToken,s=a.production_number,o=a.device_id;if(s&&a.registered_by.id===n.props.userID){var l=JSON.stringify({production_number:s});E.a.ajax({method:"PUT",url:O+"/api/hardware/".concat(o),headers:{Authorization:r,"Content-Type":"application/json"},data:l,dataType:"json",success:function(e){h()({title:"Hardware Info Updated Successfully.",icon:"success"})},error:function(e){console.log(e),h()({title:"Something went wrong.",text:"Please try again",icon:"warning"})}})}else{var i="";i=a.registered_by.id!==n.props.userID?"You cannot update information of device registered by other registrars!":"Please Enter New Production Number.",h()({title:i,icon:"warning"}).then((function(){return n.setState(Object(c.a)(Object(c.a)({},n.state),{},{searchDeviceList:[],productionNumber:""}))}))}},n.deleteHardware=function(e){e.preventDefault();var t=n.state,a=t.searchDeviceList,r=t.accessToken,s=a.device_id;a.registered_by.id===n.props.userID?h()({title:"Are You Sure You Want To Delete This Device?",icon:"warning",dangerMode:!0,buttons:{cancel:{visible:!0,value:!1,text:"No"},confirm:{visible:!0,value:!0,text:"Yes"}}}).then((function(e){e&&E.a.ajax({method:"DELETE",url:O+"/api/hardware/".concat(s),headers:{Authorization:r,"Content-Type":"application/json"},success:function(e){h()({title:"Hardware Deleted Successfully.",icon:"success"}).then((function(){return n.setState(Object(c.a)(Object(c.a)({},n.state),{},{searchDeviceList:[],productionNumber:""}))}))},error:function(e){console.log(e),h()({title:"Something went wrong.",text:"Please try again",icon:"warning"})}})})):h()({title:"Authorization Error.",text:"You cannot delete hardware registered by other registrar.",icon:"warning"})},n.getImageOrTable=function(){var e=n.state,t=e.searchDeviceList,a=e.selectedMore,s=t.filter((function(e){return e.device_id===a}));return(Array.isArray(t)?0===t.length:0===Object.keys(t).length&&t.constructor===Object)?r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a.Img,{src:R.a,style:{height:"289px",width:"400px"}})):"productionNumber"===n.state.searchOption?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{responsive:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Device Id"),r.a.createElement("td",null,n.state.searchDeviceList.device_id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Production Number"),r.a.createElement("td",null,n.state.searchDeviceList.production_number)),r.a.createElement("tr",null,r.a.createElement("td",null,"Registered By"),r.a.createElement("td",null,n.state.searchDeviceList.registered_by.username)),r.a.createElement("tr",null,r.a.createElement("td",null,"Registered On"),r.a.createElement("td",null,n.state.searchDeviceList.registered_on)))),r.a.createElement("div",{style:q},r.a.createElement(L.a,null,r.a.createElement(j.a,{variant:"primary",onClick:function(){return n.setState({editModalShow:!0})}}," Edit"),r.a.createElement(j.a,{variant:"danger",style:{marginLeft:"5px"},onClick:n.deleteHardware},"Delete"),r.a.createElement(A.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:n.state.editModalShow},r.a.createElement(g.a,{onSubmit:n.updateHardwareInfo},r.a.createElement(A.a.Header,{closeButton:!0,onClick:function(){return n.setState({editModalShow:!1})}},r.a.createElement(A.a.Title,{id:"contained-modal-title-vcenter"},"Edit Hardware Info")),r.a.createElement(A.a.Body,null,r.a.createElement("div",null,r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"Production Number")),r.a.createElement(F.a,{placeholder:"Enter Production Number","aria-label":"Production Number","aria-describedby":"basic-addon1",required:!0,type:"number",value:n.state.searchDeviceList.production_number,onChange:n.newProductionNumber})))),r.a.createElement(A.a.Footer,null,r.a.createElement(j.a,{variant:"danger",onClick:function(){return n.setState({editModalShow:!1})}},"Close"),r.a.createElement(j.a,{variant:"success",onClick:function(){return n.setState({editModalShow:!1})},type:"submit"},"Save Changes"))))))):"registeredDate"===n.state.searchOption?r.a.createElement(r.a.Fragment,null,r.a.createElement(_.a,{responsive:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Production Number"),r.a.createElement("th",null,"Registered Date"),r.a.createElement("th",null)),n.state.searchDeviceList.map((function(e){return r.a.createElement("tr",{key:e.device_id},r.a.createElement("td",null,e.production_number),r.a.createElement("td",null,e.registered_on),r.a.createElement("td",null," ",r.a.createElement(j.a,{variant:"primary",onClick:function(){return n.setState({moreInfoModalShow:!0,selectedMore:e.device_id})}},"More")),r.a.createElement(A.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:n.state.moreInfoModalShow},r.a.createElement(w.a,null,r.a.createElement(A.a.Header,{closeButton:!0,onClick:function(){return n.setState({moreInfoModalShow:!1})}},r.a.createElement(A.a.Title,{id:"contained-modal-title-vcenter"},"Detail Info")),r.a.createElement(A.a.Body,null,r.a.createElement("div",null,r.a.createElement(_.a,{responsive:!0},r.a.createElement("tbody",null,s.map((function(e){return r.a.createElement(r.a.Fragment,null,r.a.createElement("tr",null,r.a.createElement("td",null,"Device Id"),r.a.createElement("td",null,e.device_id)),r.a.createElement("tr",null,r.a.createElement("td",null,"Production Number"),r.a.createElement("td",null,e.production_number)),r.a.createElement("tr",null,r.a.createElement("td",null,"Registered By"),r.a.createElement("td",null,e.registered_by.username)),r.a.createElement("tr",null,r.a.createElement("td",null,"Registered On"),r.a.createElement("td",null,e.registered_on)))})))))),r.a.createElement(A.a.Footer,null,r.a.createElement(j.a,{variant:"danger",onClick:function(){return n.setState({moreInfoModalShow:!1})}},"Close"),r.a.createElement(A.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:n.state.editModalShow},r.a.createElement(g.a,{onSubmit:n.updateHardwareInfo},r.a.createElement(A.a.Header,{closeButton:!0,onClick:function(){return n.setState({editModalShow:!1})}},r.a.createElement(A.a.Title,{id:"contained-modal-title-vcenter"},"Edit Hardware Info")),r.a.createElement(A.a.Body,null,r.a.createElement("div",null,r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"Production Number")),r.a.createElement(F.a,{placeholder:"Enter Production Number","aria-label":"Production Number","aria-describedby":"basic-addon1",required:!0,type:"number",value:s.map((function(e){return e.production_number})),onChange:n.newProductionNumberFromDetail})))),r.a.createElement(A.a.Footer,null,r.a.createElement(j.a,{variant:"danger",onClick:function(){return n.setState({editModalShow:!1})}},"Close"),r.a.createElement(j.a,{variant:"success",onClick:function(){return n.setState({editModalShow:!1})},type:"submit"},"Save Changes"))))))))}))))):void 0},n.getSearchField=function(){var e=n.state.searchOption;return"productionNumber"===e?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Control,{placeholder:"Production number","aria-label":"Production Number","aria-describedby":"basic-addon1",type:"number",onChange:n.updateProductNumber,value:n.state.productionNumber,required:!0})):"registeredDate"===e?r.a.createElement(r.a.Fragment,null,r.a.createElement(g.a.Control,{placeholder:"Registered Date","aria-label":"Registered Date","aria-describedby":"basic-addon1",type:"date",onChange:n.updateRegisteredDate,value:n.state.registeredDate,required:!0})):void 0},n.state={editModalShow:!1,moreInfoModalShow:!1,selectedMore:"",productionNumber:"",registeredDate:"",accessToken:n.props.access,searchDeviceList:[],searchOption:"productionNumber"},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return this.state.searchDeviceList,r.a.createElement(r.a.Fragment,null,r.a.createElement(w.a,{style:B},r.a.createElement("a",{onClick:function(){e.setState({searchDeviceList:[],productionNumber:"",registeredDate:""})}},r.a.createElement("h3",{style:{textAlign:"center"}}," Search Hardware ")),r.a.createElement("br",null),r.a.createElement(g.a,{onSubmit:this.getHardware},r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(U.a,null,r.a.createElement(U.a.Toggle,{variant:"success",id:"dropdown-basic"},"Search By"),r.a.createElement(U.a.Menu,null,r.a.createElement(U.a.Item,{onClick:function(){return e.setState(Object(c.a)(Object(c.a)({},e.state),{},{searchOption:"productionNumber",searchDeviceList:[],productionNumber:""}))}},"Production Number"),r.a.createElement(U.a.Item,{onClick:function(){return e.setState(Object(c.a)(Object(c.a)({},e.state),{},{searchOption:"registeredDate",searchDeviceList:[],registeredDate:""}))}},"Registered Date")))),this.getSearchField(),r.a.createElement(y.a.Append,null,r.a.createElement(j.a,{variant:"success",type:"submit"},"Search")))),r.a.createElement("br",null),this.getImageOrTable()))}}]),a}(n.Component),z=Object(m.b)((function(e){return{username:e.credentials.user.username,access:e.credentials.tokens.accessToken,userID:e.credentials.user.id}}),{})(J),V=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).refreshToken=function(){var e=n.state.reduxValue;setInterval((function(){E.a.ajax({method:"POST",url:O+"/api/auth/token/refresh",data:{refresh:e.tokens.refreshToken},success:function(t){e.tokens.accessToken="Bearer ".concat(t.access),n.props.setAuthCred(e)}})}),6e5)},n.getUserID=function(){var e=n.state.reduxValue,t=e.tokens.accessToken,a={username:e.user.username};E.a.ajax({method:"GET",url:O+"/api/user/",headers:{Authorization:t,"Content-Type":"application/json"},data:a,dataType:"json",success:function(t){e.user.id=t.results.id,n.props.setAuthCred(e)},error:function(e){console.log(e),h()({title:"Unable to update your user data.",icon:"warning"})}})},n.state={reduxValue:n.props.reduxValue},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.getUserID()}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"container",style:{marginTop:"10vh"}},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-sm-auto margin-card"},r.a.createElement(I,null)),r.a.createElement("div",{className:"col-sm-auto margin-card"},r.a.createElement(z,null)))))}}]),a}(n.Component),G=Object(m.b)((function(e){return{reduxValue:e.credentials}}),{setAuthCred:v})(V),X=a(95),Y=function(e){return r.a.createElement(X.a,null,e.children)},W=a(27),$=a(65),K={user:{id:"",username:""},tokens:{accessToken:"",refreshToken:""}};var Q=Object(W.c)({credentials:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:K,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return console.log(t.cred),t.cred;default:return e}}});var Z=function(){try{var e=localStorage.getItem("state");if(null===e)return;return JSON.parse(e)}catch(t){return void console.log(t)}}(),ee=Object(W.e)(Q,Z,Object(W.d)(Object(W.a)($.a),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),te=ee,ae={padding:"30px",borderRadius:"10px",boxShadow:"0px 0px 10px 0px #000"},ne=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).updateUsername=function(e){var t=n.state.auth;t.user.username=e.target.value,n.setState(Object(c.a)(Object(c.a)({},n.state),{},{auth:t}))},n.updatePassword=function(e){var t=n.state.password;t=e.target.value,n.setState(Object(c.a)(Object(c.a)({},n.state),{},{password:t}))},n.state={url:O+"/api/auth/token/login/",auth:{user:{username:n.props.credentials.username},tokens:{accessToken:n.props.tokens.accessToken,refreshToken:n.props.tokens.refreshToken}},password:""},n.submitForm=n.submitForm.bind(Object(M.a)(n)),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.state.auth.tokens.accessToken&&this.props.setAuth()}},{key:"submitForm",value:function(e){e.preventDefault();var t=this.state.auth.user.username,a=this.state.password,n=JSON.stringify({username:t,password:a}),r=this;E.a.ajax({method:"POST",url:this.state.url,headers:{app:"6117160db3031c067ae97f06a216ebb4c64f9a978956e63c75f19c824f8b59e8a92c038d2ec9e5b5c1d6ee023212b6f26a8ceb07954cec05e902d278a7b6cf1a","Content-Type":"application/json"},data:n,dataType:"json",success:function(e){r.state.auth.tokens={accessToken:"Bearer ".concat(e.access),refreshToken:e.refresh},r.props.setAuthCred(r.state.auth),r.props.setAuth()},error:function(e){console.log(e),h()({title:"Authentication failed",icon:"error"})}})}},{key:"render",value:function(){return r.a.createElement(r.a.Fragment,null,r.a.createElement(Y,null,r.a.createElement("div",{className:"vertical-center"},r.a.createElement("div",{className:"container-fluid"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-10 col-sm-6 col-md-6"},r.a.createElement("div",{className:"form-container",style:ae},r.a.createElement("h3",{style:{textAlign:"center"}},"LOGIN"),r.a.createElement("br",null),r.a.createElement("form",{onSubmit:this.submitForm},r.a.createElement(g.a.Group,{controlId:"formBasicUsername"},r.a.createElement(g.a.Label,null,"Username"),r.a.createElement(g.a.Control,{type:"text",placeholder:"Enter Username",name:"username",value:this.state.username,onChange:this.updateUsername})),r.a.createElement(g.a.Group,{controlId:"formBasicPassword"},r.a.createElement(g.a.Label,null,"Password"),r.a.createElement(g.a.Control,{type:"password",placeholder:"Enter Password",name:"password",value:this.state.password,onChange:this.updatePassword})),r.a.createElement(j.a,{variant:"success",type:"submit",className:"btn-block"},"Login")))))))))}}]),a}(n.Component),re=Object(m.b)((function(e){return{credentials:e.credentials.user,tokens:e.credentials.tokens}}),{setAuthCred:v})(ne);ee.subscribe((function(){return function(e){try{var t=JSON.stringify(e);localStorage.setItem("state",t)}catch(a){console.log(a)}}(ee.getState())}));var se=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(){return Object(l.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement("h2",null,"About Page"),r.a.createElement("p",null,"This is a Hardware Registration App."))}}]),a}(n.Component),oe={padding:"30px",borderRadius:"10px",boxShadow:"0px 0px 10px 0px #000"},ce={display:"flex",justifyContent:"center"},le=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).newFirstName=function(e){var t=n.state.userInfo;t.first_name=e.target.value,n.setState(Object(c.a)(Object(c.a)({},n.state),{},{userInfo:t}))},n.newLastName=function(e){var t=n.state.userInfo;t.last_name=e.target.value,n.setState(Object(c.a)(Object(c.a)({},n.state),{},{userInfo:t}))},n.newEmail=function(e){var t=n.state.userInfo;t.email=e.target.value,n.setState(Object(c.a)(Object(c.a)({},n.state),{},{userInfo:t}))},n.newUsername=function(e){var t=n.state.userInfo;t.username=e.target.value,n.setState(Object(c.a)(Object(c.a)({},n.state),{},{userInfo:t}))},n.newPhone=function(e){var t=n.state.userInfo;t.phone=e.target.value,n.setState(Object(c.a)(Object(c.a)({},n.state),{},{userInfo:t}))},n.updateUserInfo=function(e){e.preventDefault();var t=n.state,a=t.userInfo,r=t.accessToken,s=a.id;a.active=a.is_active,a.superuser=a.is_superuser,a.staff=a.is_staff;var o=JSON.stringify(a),c=n.props.credentials;E.a.ajax({method:"PUT",url:O+"/api/user/".concat(s),xhr:function(){var e=new window.XMLHttpRequest;return e.upload.addEventListener("progress",(function(){h()({icon:x.a})}),!1),e},headers:{Authorization:r,"Content-Type":"application/json"},data:o,dataType:"json",success:function(e){c.user={username:a.username},n.props.setAuthCred(c),h()({title:"User Information Updated Successfully.",icon:"success"})},error:function(e){console.log(e),h()({title:"Something went wrong",text:"Please try again",icon:"warning"})}})},n.updatedNewPassword=function(e){var t=n.state.password;t.newPassword=e.target.value,n.setState(Object(c.a)(Object(c.a)({},n.state),{},{password:t}))},n.updatedConfirmNewPassword=function(e){var t=n.state.password;t.confirmNewPassword=e.target.value,n.setState(Object(c.a)(Object(c.a)({},n.state),{},{password:t}))},n.updateUserPassword=function(e){e.preventDefault();var t=n.state,a=t.password,r=t.userInfo,s=t.accessToken,o=a.confirmNewPassword,l=a.newPassword,i=r.id,u=JSON.stringify({password:o});l===o?E.a.ajax({method:"PUT",url:O+"/api/user/password/".concat(i),headers:{Authorization:s,"Content-Type":"application/json"},data:u,dataType:"json",success:function(e){h()({title:"Password Changed Successfully.",icon:"success"}).then((function(){return n.setState(Object(c.a)(Object(c.a)({},n.state),{},{password:[]}))}))},error:function(e){console.log(e),h()({title:"Something went wrong.",text:"Please try again",icon:"warning"})}}):h()({title:"Password Update Error!",text:"New password must be different from old password and New password and Confirm New Password must match.",icon:"warning"}).then((function(){return n.setState(Object(c.a)(Object(c.a)({},n.state),{},{password:[]}))}))},n.state={editModalShow:!1,changepasswordModalShow:!1,accessToken:n.props.credentials.tokens.accessToken,userInfo:{},password:{newPassword:"",confirmNewPassword:""}},n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){var e=this.state.accessToken,t={username:this.props.credentials.user.username},a=this;E.a.ajax({method:"GET",url:O+"/api/user/",headers:{Authorization:e,"Content-Type":"application/json"},data:t,dataType:"json",success:function(e){a.setState(Object(c.a)(Object(c.a)({},a.state),{},{userInfo:e.results}))},error:function(e){console.log(e),h()({title:"Unable to fetch your user data.",text:"Please try again.",icon:"warning"})}})}},{key:"render",value:function(){var e=this;return r.a.createElement("div",{className:"container-fluid",style:{marginTop:"15vh"}},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"col-10 col-sm-6 col-md-6"},r.a.createElement("div",{className:"form-container",style:oe},r.a.createElement("h3",{style:{textAlign:"center"}},"Profile"),r.a.createElement("br",null),r.a.createElement("div",{className:"container",style:{textAlign:"center"}},r.a.createElement(_.a,{responsive:!0},r.a.createElement("tbody",null,r.a.createElement("tr",null,r.a.createElement("td",null,"Name"),r.a.createElement("td",null,this.state.userInfo.first_name," ",this.state.userInfo.last_name)),r.a.createElement("tr",null,r.a.createElement("td",null,"Username"),r.a.createElement("td",null,this.state.userInfo.username)),r.a.createElement("tr",null,r.a.createElement("td",null,"Email"),r.a.createElement("td",null,this.state.userInfo.email)),r.a.createElement("tr",null,r.a.createElement("td",null,"Phone no"),r.a.createElement("td",null,this.state.userInfo.phone))))),r.a.createElement("div",{style:ce},r.a.createElement(L.a,null,r.a.createElement(j.a,{variant:"primary",style:{marginRight:"5px"},onClick:function(){return e.setState({editModalShow:!0})}}," Edit Info "),r.a.createElement(A.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:this.state.editModalShow},r.a.createElement(g.a,{onSubmit:this.updateUserInfo},r.a.createElement(A.a.Header,{closeButton:!0,onClick:function(){return e.setState({editModalShow:!1})}},r.a.createElement(A.a.Title,{id:"contained-modal-title-vcenter"},"Edit Profile Info")),r.a.createElement(A.a.Body,null,r.a.createElement("div",null,r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"First Name")),r.a.createElement(F.a,{placeholder:"Enter First Name","aria-label":"First Name","aria-describedby":"basic-addon1",required:!0,type:"text",value:this.state.userInfo.first_name,onChange:this.newFirstName})),r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"Last Name")),r.a.createElement(F.a,{placeholder:"Enter Last Name","aria-label":"Last Name","aria-describedby":"basic-addon1",required:!0,type:"text",value:this.state.userInfo.last_name,onChange:this.newLastName})),r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"Username")),r.a.createElement(F.a,{placeholder:"Enter Username","aria-label":"Username","aria-describedby":"basic-addon1",required:!0,type:"text",value:this.state.userInfo.username,onChange:this.newUsername})),r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"Email")),r.a.createElement(F.a,{placeholder:"Enter Email Address","aria-label":"Email","aria-describedby":"basic-addon1",required:!0,type:"email",value:this.state.userInfo.email,onChange:this.newEmail})),r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"Phone no")),r.a.createElement(F.a,{placeholder:"Enter Phone Number","aria-label":"Phone no","aria-describedby":"basic-addon1",required:!0,type:"number",value:this.state.userInfo.phone,onChange:this.newPhone})))),r.a.createElement(A.a.Footer,null,r.a.createElement(j.a,{variant:"danger",onClick:function(){return e.setState({editModalShow:!1})}},"Close"),r.a.createElement(j.a,{variant:"success",type:"submit",onClick:function(){return e.setState({editModalShow:!1})}},"Save Changes"))))),r.a.createElement(L.a,null,r.a.createElement(j.a,{variant:"secondary",onClick:function(){return e.setState({changepasswordModalShow:!0})}}," Change Password "),r.a.createElement(A.a,{"aria-labelledby":"contained-modal-title-vcenter",centered:!0,show:this.state.changepasswordModalShow},r.a.createElement(g.a,{onSubmit:this.updateUserPassword},r.a.createElement(A.a.Header,{closeButton:!0,onClick:function(){return e.setState({changepasswordModalShow:!1})}},r.a.createElement(A.a.Title,{id:"contained-modal-title-vcenter"},"Change Password")),r.a.createElement(A.a.Body,null,r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"Old Password")),r.a.createElement(F.a,{placeholder:"Enter Old Password","aria-label":"Old Password","aria-describedby":"basic-addon1",type:"password",required:!0,value:this.state.password.oldPassword,onChange:this.updatedOldPassword})),r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"New Password")),r.a.createElement(F.a,{placeholder:"Enter New Password","aria-label":"New Password","aria-describedby":"basic-addon1",type:"password",required:!0,value:this.state.password.newPassword,onChange:this.updatedNewPassword})),r.a.createElement(y.a,{className:"mb-3"},r.a.createElement(y.a.Prepend,null,r.a.createElement(y.a.Text,{id:"basic-addon1"},"Confirm Password")),r.a.createElement(F.a,{placeholder:"Re-enter New Password","aria-label":"Confirm Password","aria-describedby":"basic-addon1",type:"password",required:!0,value:this.state.password.confirmNewPassword,onChange:this.updatedConfirmNewPassword}))),r.a.createElement(A.a.Footer,null,r.a.createElement(j.a,{variant:"danger",onClick:function(){return e.setState({changepasswordModalShow:!1})}},"Close"),r.a.createElement(j.a,{variant:"success",type:"submit",onClick:function(){return e.setState({changepasswordModalShow:!1})}},"Save Changes"))))))))))}}]),a}(n.Component),ie=Object(m.b)((function(e){return{credentials:e.credentials}}),{setAuthCred:v})(le),ue=a(66),de=a(99);function me(){var e=Object(ue.a)(["\n    .navbar-brand {\n        color: #ffffff;\n\n        &:hover {\n            color: #e1ebe5;\n        }\n\n       \n    }   \n"]);return me=function(){return e},e}var pe=a(67).a.div(me()),he=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).killSession=function(){localStorage.removeItem("state"),window.location.href=""},n.state={username:JSON.parse(localStorage.getItem("state")).credentials.user.username},n}return Object(i.a)(a,[{key:"render",value:function(){var e=this;return r.a.createElement(pe,null,r.a.createElement(de.a,{expand:"lg",className:"bg-dark"},r.a.createElement(X.a,null,r.a.createElement(de.a.Brand,{onClick:function(){return e.props.setMode("home")}},r.a.createElement("h3",null,"Hardware Registration App")),r.a.createElement(de.a.Toggle,{"aria-controls":"basic-navbar-nav"}),r.a.createElement(de.a.Collapse,{id:"basic-navbar-nav"},r.a.createElement("div",{style:{position:"absolute",right:"15rem"}},r.a.createElement(U.a,null,r.a.createElement(U.a.Toggle,{variant:"secondary",id:"dropdown-basic"},this.state.username),r.a.createElement(U.a.Menu,null,r.a.createElement(U.a.Item,{onClick:function(){return e.props.setMode("profile")}},"Profile"),r.a.createElement(U.a.Item,{onClick:function(){return e.props.setMode("about")}},"About"),r.a.createElement(U.a.Divider,null),r.a.createElement(U.a.Item,{onClick:this.killSession},"Logout"))))))))}}]),a}(n.Component),be={authenticated:!1,mode:"home"},Ee=function(e){Object(u.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).setMode=function(e){n.setState(Object(c.a)(Object(c.a)({},n.state),{},{mode:e}))},n.setAuth=function(){return n.setState(Object(c.a)(Object(c.a)({},n.state),{},{authenticated:!0}))},n.state=be,n}return Object(i.a)(a,[{key:"getComponents",value:function(){var e,t=this.state.mode;return"home"===t?e=r.a.createElement(G,null):"profile"===t?e=r.a.createElement(ie,null):"about"===t&&(e=r.a.createElement(se,null)),r.a.createElement(r.a.Fragment,null,r.a.createElement(he,{setMode:this.setMode}),e)}},{key:"render",value:function(){return r.a.createElement(m.a,{store:te},r.a.createElement(r.a.Fragment,null,this.state.authenticated?this.getComponents():r.a.createElement(re,{setAuth:this.setAuth})))}}]),a}(n.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(Ee,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[74,1,2]]]);
//# sourceMappingURL=main.f79eb414.chunk.js.map